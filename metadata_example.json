{
  "data_sources": [
    {
      "name": "源数据库",
      "description": "业务系统源数据库",
      "source_type": "oracle",
      "type": "oracle",
      "connection_config": {
        "host": "localhost",
        "port": 1521,
        "service_name": "ORCL",
        "username": "example_user",
        "password": "example_password"
      }
    },
    {
      "name": "数据仓库",
      "description": "ETL处理后的数据仓库",
      "source_type": "oracle",
      "type": "oracle",
      "connection_config": {
        "host": "localhost",
        "port": 1521,
        "service_name": "DWH",
        "username": "example_user",
        "password": "example_password"
      }
    }
  ],
  "tables": [
    {
      "data_source_name": "源数据库",
      "name": "customer_info",
      "description": "客户基础信息表",
      "owner": "business",
      "create_time": "2023-01-15T08:30:00Z"
    },
    {
      "data_source_name": "源数据库",
      "name": "order_detail",
      "description": "订单明细表",
      "owner": "business",
      "create_time": "2023-01-20T10:15:00Z"
    },
    {
      "data_source_name": "数据仓库",
      "name": "dw_customer_order",
      "description": "客户订单汇总表",
      "owner": "dwh",
      "create_time": "2023-02-10T14:45:00Z"
    }
  ],
  "columns": [
    {
      "table_name": "customer_info",
      "data_source_name": "源数据库",
      "name": "customer_id",
      "data_type": "VARCHAR2(20)",
      "description": "客户ID",
      "is_primary_key": true
    },
    {
      "table_name": "customer_info",
      "data_source_name": "源数据库",
      "name": "customer_name",
      "data_type": "VARCHAR2(100)",
      "description": "客户名称"
    },
    {
      "table_name": "customer_info",
      "data_source_name": "源数据库",
      "name": "register_date",
      "data_type": "DATE",
      "description": "注册日期"
    },
    {
      "table_name": "order_detail",
      "data_source_name": "源数据库",
      "name": "order_id",
      "data_type": "VARCHAR2(30)",
      "description": "订单ID",
      "is_primary_key": true
    },
    {
      "table_name": "order_detail",
      "data_source_name": "源数据库",
      "name": "customer_id",
      "data_type": "VARCHAR2(20)",
      "description": "客户ID",
      "is_foreign_key": true
    },
    {
      "table_name": "order_detail",
      "data_source_name": "源数据库",
      "name": "order_amount",
      "data_type": "NUMBER(10,2)",
      "description": "订单金额"
    },
    {
      "table_name": "order_detail",
      "data_source_name": "源数据库",
      "name": "order_date",
      "data_type": "DATE",
      "description": "下单日期"
    },
    {
      "table_name": "dw_customer_order",
      "data_source_name": "数据仓库",
      "name": "customer_id",
      "data_type": "VARCHAR2(20)",
      "description": "客户ID",
      "is_primary_key": true
    },
    {
      "table_name": "dw_customer_order",
      "data_source_name": "数据仓库",
      "name": "customer_name",
      "data_type": "VARCHAR2(100)",
      "description": "客户名称"
    },
    {
      "table_name": "dw_customer_order",
      "data_source_name": "数据仓库",
      "name": "total_orders",
      "data_type": "NUMBER(8)",
      "description": "订单总数"
    },
    {
      "table_name": "dw_customer_order",
      "data_source_name": "数据仓库",
      "name": "total_amount",
      "data_type": "NUMBER(12,2)",
      "description": "订单总金额"
    },
    {
      "table_name": "dw_customer_order",
      "data_source_name": "数据仓库",
      "name": "last_order_date",
      "data_type": "DATE",
      "description": "最近订单日期"
    }
  ],
  "lineages": [
    {
      "source_table_name": "customer_info",
      "source_db_name": "源数据库",
      "target_table_name": "dw_customer_order",
      "target_db_name": "数据仓库",
      "lineage_type": "TRANSFORMATION",
      "description": "客户信息数据抽取到数据仓库",
      "transformation_logic": "SELECT customer_id, customer_name FROM customer_info",
      "source_column_name": "customer_id",
      "target_column_name": "customer_id"
    },
    {
      "source_table_name": "customer_info",
      "source_db_name": "源数据库",
      "target_table_name": "dw_customer_order",
      "target_db_name": "数据仓库",
      "lineage_type": "TRANSFORMATION",
      "description": "客户名称字段映射",
      "transformation_logic": "SELECT customer_id, customer_name FROM customer_info",
      "source_column_name": "customer_name",
      "target_column_name": "customer_name"
    },
    {
      "source_table_name": "order_detail",
      "source_db_name": "源数据库",
      "target_table_name": "dw_customer_order",
      "target_db_name": "数据仓库",
      "lineage_type": "AGGREGATION",
      "description": "订单数据聚合到数据仓库",
      "transformation_logic": "SELECT customer_id, COUNT(*) as total_orders, SUM(order_amount) as total_amount, MAX(order_date) as last_order_date FROM order_detail GROUP BY customer_id"
    },
    {
      "source_table_name": "order_detail",
      "source_db_name": "源数据库",
      "target_table_name": "dw_customer_order",
      "target_db_name": "数据仓库",
      "lineage_type": "AGGREGATION",
      "description": "订单数量统计",
      "transformation_logic": "COUNT(*)聚合计算",
      "source_column_name": "order_id",
      "target_column_name": "total_orders"
    },
    {
      "source_table_name": "order_detail",
      "source_db_name": "源数据库",
      "target_table_name": "dw_customer_order",
      "target_db_name": "数据仓库",
      "lineage_type": "AGGREGATION",
      "description": "订单金额汇总",
      "transformation_logic": "SUM(order_amount)聚合计算",
      "source_column_name": "order_amount",
      "target_column_name": "total_amount"
    },
    {
      "source_table_name": "order_detail",
      "source_db_name": "源数据库",
      "target_table_name": "dw_customer_order",
      "target_db_name": "数据仓库",
      "lineage_type": "AGGREGATION",
      "description": "最近订单日期",
      "transformation_logic": "MAX(order_date)计算",
      "source_column_name": "order_date",
      "target_column_name": "last_order_date"
    }
  ]
}